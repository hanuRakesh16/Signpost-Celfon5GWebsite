{% extends 'main.html' %}
{% load static %}
{% load crispy_forms_filters %}
{% load crispy_forms_tags %}
{% load crispy_forms_field %}
{% load widget_tweaks %}
{% block content %}
<body>
    <section class="login-page section-b-space">
        <div class="container">
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-warning" role="alert">
                        {{message}}
                    </div>
                {% endfor %}
            {% endif %}
            <div class="row">
                <div class="col-lg-12">
                    <div class="theme-card">
                        <h1 style="text-align: center;">Business Details</h1>
                        <form id="BusinessForm" method="post" data-cities-url="{% url 'ajax_load_cities' %}"data-cat-url="{% url 'ajax_load_cat' %}"
                        data-p-url="{% url 'ajax_load_p' %}">
                            {% csrf_token %}
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="id_name" class="form-label">Name:</label>
                                            {% render_field form.name class="form-control" data-rule-minlength="2" data-rule-maxlength="45" data-msg-minlength="At least two chars" data-msg-maxlength="max 45 chars" maxlength="45" type="text" id="bname" %}
                                        </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="id_phone">phone Number:</label>
                                                {% render_field form.mobile_number class="form-control phone" pattern="(0|91)?[6-9][0-9]{9}" required="required" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" max_length="10" type="number" id="ph" %}
                                             </div>
                                        <div class="form-group">
                                            <label for="streetName" class="form-label">Street Name:</label>
                                            {% render_field form.street_name class="form-control" type="text" id="exampleInputUsername" %}
                                        </div>
                                        <div class="form-group">
                                            <label for="state" class="form-label" >State:</label>
                                            {% render_field form.state class="form-control" maxlength="100" type="dropdown" id="id_state" %}
                                          </div>
                                          <div class="form-group">
                                            <label for="pincode" class="form-label">Pincode:</label>
                                            {% render_field form.pincode class="form-control" pattern=".{6}" required="required" title="6 characters minimum" type="number" id="pincode" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" maxlength="6" %}
                                        </div>
                                        <div class="form-group">
                                            <label for="id_door_no">Door No:</label>
                                            {% render_field form.door_no class="form-control" maxlength="100" type="text" id="exampleInputUsername" maxlength="15"%}
                                         </div>
                                        <div class="form-group">
                                            <label for="id_building_floor">Building/Floor:</label>
                                            {% render_field form.building_name class="form-control" type="text" id="exampleInputUsername" %}
                        
                                        </div>
                                        <div class="form-group">
                                            <label for="id_area">Area:</label>
                                            {% render_field form.area class="form-control" maxlength="100" type="text" id="exampleInputUsername" %}
                       
                                        </div>
                                        <div class="form-group">
                                            <label for="id_landmark">Landmark:</label>
                                            {% render_field form.landmark class="form-control" type="text" id="exampleInputUsername" %}
                        
                                      </div>
                                        <div class="form-group">
                                            <label for="id_std">STD:</label>
                                            {% render_field form.std_code class="form-control office_phone" type="number" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" max_length="10" id="std" %}

                                        </div>
                                        <div class="form-group">
                                            <label for="id_landline">Landline:</label>
                                            {% render_field form.landline class="form-control office_phone" type="number" oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);" max_length="10" id="office_mobile" %}

                                        </div>
                                        <div class="form-group">
                                            <label for="id_email">Email:</label>
                                            {% render_field form.email class="form-control" maxlength="100" type="email" id="exampleInputUsername" %}

                                        </div>
                                        <div class="form-group">
                                            <label for="id_website">Website:</label>
                                            {% render_field form.website class="form-control" type="text" id="exampleInputUsername" %}
                                        </div> 
                                        <div class="form-group">
                                            <label for="id_visiting_card">Visiting Card:</label>
                                            <h6>{{form.visiting_card}}</h6>
                                          </div>

                                        <div class="form-group">
                                            <label for="id_logo">Logo:</label>
                                            <h6>{{form.logo}}</h6>
                                        </div>

                                        <div class="form-group">
                                            <label for="id_catalogue">Catalogue: {{form.catalogue}}</label>
                                
                                        </div>
                                        <div class="form-group">
                                            <label for="id_video">Video Url:</label>
                                            {% render_field form.video class="form-control" type="text" id="exampleInputUsername" %} 
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                         <div class="form-group">
                                            <label for="city" class="form-label">City:</label>
                                            {% render_field form.city class="form-control" type="text" id="exampleInputUsername" %}
                                        </div>

                                        <div class="form-group">
                                            <label for="district" class="form-label"  >District:</label>
                                            {% render_field form.district class="form-control" maxlength="100" type="dropdown" id="id_city" %}
                                        </div>


                                        <div class="form-group">
                                            <label for="id_business_nature">Business Nature:</label>
                                            {% render_field form.nature class="form-control" maxlength="100" type="dropdown" id="nature" %}
                                        </div>

                                        <div class="form-group">
                                            <label for="id_gst_no">GST No:</label>
                                            {% render_field form.gst_no class="form-control" maxlength="100" type="dropdown" id="gst" %}
                       
                                         </div>

                                         <div class="form-group">
                                            <label for="product" class="form-label">Product:</label>
                                            {% render_field form.mproducts1 class="form-control product" name="mp1" type="text" id="id_products" %}
                                        </div>

                                         <div class="form-group">
                                            <label for="category" class="form-label">Category:</label>
                                            {% render_field form.mcategory1 class="form-control" name="mc1" type="text" id="id_category" %}
                                        
                                          </div>

                                            <div class="form-group">
                                                <label for="subCategory" class="form-label">Sub-Category:</label>
                                                {% render_field form.mcategory1 class="form-control" name="mc1" type="text" id="id_category" %}
                                       
                                             </div>

                                        <div class="form-group">
                                            <label for="productType" class="form-label">Product Type:</label>
                                            {% render_field form.mtype1 class="form-control" name="mtype1" type="text" id="type1" %}
                                        

                                            
                                        <div class="form-group">
                                            <label for="id_mproduct2">Product 2:</label>
                                            {% render_field form.mproducts2 class="form-control product" name="mp2" type="text" id="id_products1" %}
                                        </div>


                                        <div class="form-group">
                                            <label for="id_mcategory2">Category 2:</label>
                                            {% render_field form.mcategory2 class="form-control" name="mc2" type="text" id="id_category1" %}
                               
                                        </div>

                                        <div class="form-group">
                                            <label for="id_msub_catego2">Sub-Category 2:</label>
                                            {% render_field form.msub_category2 class="form-control" name="msc2" type="text" id="id_sub_category1" %}
                               
                                        </div>


                                        <div class="form-group">
                                            <label for="id_mtype2">Type 2:</label>
                                            {% render_field form.mtype2 class="form-control" name="mtype1" type="text" id="type2" %}
                                        
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label for="id_mproduct3">Product 3:</label>
                                            {% render_field form.mproducts3 class="form-control product" name="mp3" type="text" id="id_products2" %}
                            
                                        </div>

                                        <div class="form-group">
                                            <label for="id_mcategory3">Category 3:</label>
                                            {% render_field form.mcategory3 class="form-control" name="mc3" type="text" id="id_category2" %}
                                  
                                          </div>

                                        <div class="form-group">
                                            <label for="id_msub_catego3">Sub-Category 3:</label>
                                            {% render_field form.msub_category3 class="form-control" name="msc3" type="text" id="id_sub_category2" %}
                               
                                        </div>

                                        <div class="form-group">
                                            <label for="id_mtype3">Type 3:</label>
                                           {% render_field form.mtype3 class="form-control" name="mtype1" type="text" id="type3" %}
                              
                                          </div>
                                    </div>
                                </div>
                            </div>
                             <div class="container">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group text-center">
                                            <button type="submit" class="btn btn-danger">Submit</button>
                                        </div>
                                    </div>
                                </div> 
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>

<script src="{% static 'assets/js/jquery-3.3.1.min.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

<script>
       $("#id_state").change(function () {
            const url = $("#BusinessForm").attr("data-cities-url");  // get the url of the `load_cities` view
            const countryId = $(this).val();  // get the selected country ID from the HTML input

            $.ajax({                       // initialize an AJAX request
                url: url,                    // set the url of the request (= /persons/ajax/load-cities/ )
                data: {
                    'region_id': countryId       // add the country id to the GET parameters
                },
                success: function (data) {   // `data` is the return of the `load_cities` view function
                    $("#id_district").html(data);  // replace the contents of the city input with the data that came from the server
                }
            });
        });

        $("#id_products1").change(function () {
            const url = $("#BusinessForm").attr("data-cat-url");
            const pId = $(this).val();

            $.ajax({
                url: url,
                data: {
                    'product_id': pId
                },
                success: function (data) {
                    $("#id_sub_category1").html(data);
                }
            });
        });
        $("#id_products1").change(function () {
            const url = $("#BusinessForm").attr("data-p-url");
            const prId = $(this).val();

            $.ajax({
                url: url,
                data: {
                    'pr_id': prId
                },
                success: function (data) {
                    $("#id_category1").html(data);
                }
            });
        });
        $("#id_products2").change(function () {
            const url = $("#BusinessForm").attr("data-cat-url");
            const pId = $(this).val();

            $.ajax({
                url: url,
                data: {
                    'product_id': pId
                },
                success: function (data) {
                    $("#id_sub_category2").html(data);
                }
            });
        });
        $("#id_products2").change(function () {
            const url = $("#BusinessForm").attr("data-p-url");
            const prId = $(this).val();

            $.ajax({
                url: url,
                data: {
                    'pr_id': prId
                },
                success: function (data) {
                    $("#id_category2").html(data);
                }
            });
        });

        $("#id_products3").change(function () {
            const url = $("#BusinessForm").attr("data-cat-url");
            const pId = $(this).val();

            $.ajax({
                url: url,
                data: {
                    'product_id': pId
                },
                success: function (data) {
                    $("#id_sub_category3").html(data);
                }
            });
        });
        $("#id_products3").change(function () {
            const url = $("#BusinessForm").attr("data-p-url");
            const prId = $(this).val();

            $.ajax({
                url: url,
                data: {
                    'pr_id': prId
                },
                success: function (data) {
                    $("#id_category3").html(data);
                }
            });
        });

</script>

{% endblock %}